{% comment %}
  Section: Coleções Independentes com Slider Desktop
  Description: Grid ou Slider no desktop com setas modernas
  Features: Toggle entre grid estático e slider dinâmico + setas glassmorphism
{% endcomment %}

{% assign section_id = section.id %}
{% assign namespace = 'collections-' | append: section_id %}

<div class="{{ namespace }}-products" data-section-id="{{ section_id }}">
  <div class="{{ namespace }}-section-header">
    <h2 class="{{ namespace }}-section-title">{{ section.settings.title }}</h2>
  </div>

  {% if collections[section.settings.collection].products.size > 0 %}
    {% assign products_count = collections[section.settings.collection].products.size %}
    {% assign show_slider = false %}
    {% if section.settings.desktop_layout == 'slider' and products_count > 4 %}
      {% assign show_slider = true %}
    {% endif %}

    <div class="{{ namespace }}-product-grid 
                {% if show_slider %}{{ namespace }}-slider-mode{% endif %}" 
         data-desktop-columns="{{ section.settings.desktop_products_per_row }}"
         data-slider-mode="{{ show_slider }}">
      
      {% for product in collections[section.settings.collection].products limit: section.settings.products_to_show %}
        <div class="{{ namespace }}-product-card">
          <a href="{{ product.url | within: collection }}" class="{{ namespace }}-product-link">
            <div class="{{ namespace }}-product-image">
              {% if product.featured_image %}
                {% if forloop.index <= 2 %}
                  <img src="{{ product.featured_image | img_url: '500x500' }}" 
                       alt="{{ product.featured_image.alt | default: product.title | escape }}"
                       loading="eager">
                {% else %}
                  <img src="{{ product.featured_image | img_url: '500x500' }}" 
                       alt="{{ product.featured_image.alt | default: product.title | escape }}"
                       loading="lazy">
                {% endif %}
              {% else %}
                {{ 'product-1' | placeholder_svg_tag: namespace | append: '-placeholder-svg' }}
              {% endif %}
              
              {% if product.compare_at_price > product.price %}
                {% assign discount_percentage = product.compare_at_price | minus: product.price | times: 100 | divided_by: product.compare_at_price | round %}
                <span class="{{ namespace }}-discount-badge">{{ discount_percentage }}% OFF</span>
              {% endif %}
            </div>
            
            <div class="{{ namespace }}-product-info">
              <h3 class="{{ namespace }}-product-title">{{ product.title }}</h3>
              
              {% if product.compare_at_price > product.price %}
                <div class="{{ namespace }}-original-price-container">
                  <span class="{{ namespace }}-original-price">{{ product.compare_at_price | money }}</span>
                </div>
              {% endif %}
              
              <div class="{{ namespace }}-current-price-container">
                <span class="{{ namespace }}-current-price">{{ product.price | money }}</span>
              </div>
              
              {% if section.settings.show_installments and product.price > 0 %}
                {% assign installment_count = section.settings.installment_count | default: 12 %}
                {% assign installment_value = product.price | divided_by: installment_count %}
                <div class="{{ namespace }}-installments">
                  <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-credit-card" viewBox="0 0 20 20">
                    <path d="M17.5 4.5h-15c-.825 0-1.5.675-1.5 1.5v9c0 .825.675 1.5 1.5 1.5h15c.825 0 1.5-.675 1.5-1.5v-9c0-.825-.675-1.5-1.5-1.5zm-15 1h15v2h-15v-2zm0 9v-4h15v4h-15z"></path>
                  </svg>
                  ou {{ installment_count }}x de <strong>{{ installment_value | money }}</strong>
                </div>
              {% endif %}
              
              {% if section.settings.show_sold_count %}
                {% assign sold_count = product.metafields.custom.sold_count | default: 0 %}
                {% if sold_count > 0 %}
                  <div class="{{ namespace }}-sold-count">
                    +{{ sold_count }} Unidades vendidas
                  </div>
                {% endif %}
              {% endif %}
            </div>
          </a>
        </div>
      {% endfor %}
    </div>

    {% comment %} Navegação do Slider com Setas Modernas {% endcomment %}
    {% if show_slider %}
      <div class="{{ namespace }}-slider-nav">
        <button class="{{ namespace }}-slider-prev" type="button" aria-label="Produto anterior">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
            <path d="M15 18l-6-6 6-6"/>
          </svg>
        </button>
        <button class="{{ namespace }}-slider-next" type="button" aria-label="Próximo produto">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
            <path d="M9 18l6-6-6-6"/>
          </svg>
        </button>
      </div>
    {% endif %}

    {% if section.settings.show_view_all_button %}
      <div class="{{ namespace }}-view-all-container">
        <a href="{{ routes.collections_url }}/{{ section.settings.collection }}" 
           class="{{ namespace }}-view-all-btn">
          {{ section.settings.view_all_text }}
        </a>
      </div>
    {% endif %}

  {% else %}
    <div class="{{ namespace }}-empty-state">
      <p>Nenhum produto encontrado nesta coleção.</p>
    </div>
  {% endif %}
</div>

{% schema %}
{
  "name": "Coleções Independentes",
  "settings": [
    {
      "type": "header",
      "content": "Configurações Gerais"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Título da Seção",
      "default": "Produtos em Destaque"
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Coleção"
    },
    {
      "type": "range",
      "id": "products_to_show",
      "min": 2,
      "max": 20,
      "step": 1,
      "default": 8,
      "label": "Total de produtos para carregar"
    },
    {
      "type": "header",
      "content": "Layout Desktop"
    },
    {
      "type": "select",
      "id": "desktop_layout",
      "label": "Tipo de layout no Desktop",
      "options": [
        {"value": "grid", "label": "Grid estático (produtos em baixo do outro)"},
        {"value": "slider", "label": "Slider dinâmico (se mais de 4 produtos)"}
      ],
      "default": "grid",
      "info": "Slider só ativa quando há mais de 4 produtos"
    },
    {
      "type": "select",
      "id": "desktop_products_per_row",
      "label": "Produtos por linha no Desktop",
      "options": [
        {"value": "2", "label": "2 produtos"},
        {"value": "3", "label": "3 produtos"},
        {"value": "4", "label": "4 produtos"},
        {"value": "5", "label": "5 produtos"},
        {"value": "6", "label": "6 produtos"}
      ],
      "default": "4"
    },
    {
      "type": "select",
      "id": "tablet_products_per_row",
      "label": "Produtos por linha no Tablet",
      "options": [
        {"value": "2", "label": "2 produtos"},
        {"value": "3", "label": "3 produtos"},
        {"value": "4", "label": "4 produtos"}
      ],
      "default": "3"
    },
    {
      "type": "header",
      "content": "Tamanho das Fontes - DESKTOP"
    },
    {
      "type": "range",
      "id": "desktop_section_title_font_size",
      "min": 20,
      "max": 40,
      "step": 2,
      "default": 28,
      "unit": "px",
      "label": "Título da seção (Desktop)"
    },
    {
      "type": "range",
      "id": "desktop_product_title_font_size",
      "min": 12,
      "max": 24,
      "step": 2,
      "default": 16,
      "unit": "px",
      "label": "Nome do produto (Desktop)"
    },
    {
      "type": "range",
      "id": "desktop_original_price_font_size",
      "min": 10,
      "max": 18,
      "step": 2,
      "default": 14,
      "unit": "px",
      "label": "Preço comparativo (Desktop)"
    },
    {
      "type": "range",
      "id": "desktop_current_price_font_size",
      "min": 16,
      "max": 32,
      "step": 2,
      "default": 22,
      "unit": "px",
      "label": "Preço atual (Desktop)"
    },
    {
      "type": "range",
      "id": "desktop_installment_font_size",
      "min": 10,
      "max": 18,
      "step": 2,
      "default": 12,
      "unit": "px",
      "label": "Parcelamento (Desktop)"
    },
    {
      "type": "range",
      "id": "desktop_sold_count_font_size",
      "min": 10,
      "max": 16,
      "step": 2,
      "default": 12,
      "unit": "px",
      "label": "Contador de vendas (Desktop)"
    },
    {
      "type": "header",
      "content": "Tamanho das Fontes - MOBILE"
    },
    {
      "type": "range",
      "id": "mobile_section_title_font_size",
      "min": 16,
      "max": 32,
      "step": 2,
      "default": 22,
      "unit": "px",
      "label": "Título da seção (Mobile)"
    },
    {
      "type": "range",
      "id": "mobile_product_title_font_size",
      "min": 10,
      "max": 20,
      "step": 2,
      "default": 14,
      "unit": "px",
      "label": "Nome do produto (Mobile)"
    },
    {
      "type": "range",
      "id": "mobile_original_price_font_size",
      "min": 8,
      "max": 16,
      "step": 2,
      "default": 12,
      "unit": "px",
      "label": "Preço comparativo (Mobile)"
    },
    {
      "type": "range",
      "id": "mobile_current_price_font_size",
      "min": 14,
      "max": 26,
      "step": 2,
      "default": 18,
      "unit": "px",
      "label": "Preço atual (Mobile)"
    },
    {
      "type": "range",
      "id": "mobile_installment_font_size",
      "min": 8,
      "max": 16,
      "step": 2,
      "default": 10,
      "unit": "px",
      "label": "Parcelamento (Mobile)"
    },
    {
      "type": "range",
      "id": "mobile_sold_count_font_size",
      "min": 8,
      "max": 14,
      "step": 2,
      "default": 10,
      "unit": "px",
      "label": "Contador de vendas (Mobile)"
    },
    {
      "type": "header",
      "content": "Espaçamento entre Produtos"
    },
    {
      "type": "range",
      "id": "products_gap",
      "min": 5,
      "max": 30,
      "step": 5,
      "default": 10,
      "unit": "px",
      "label": "Espaçamento entre produtos"
    },
    {
      "type": "range",
      "id": "section_padding",
      "min": 15,
      "max": 50,
      "step": 5,
      "default": 25,
      "unit": "px",
      "label": "Padding da seção"
    },
    {
      "type": "range",
      "id": "image_height",
      "min": 180,
      "max": 320,
      "step": 20,
      "default": 240,
      "unit": "px",
      "label": "Altura das imagens"
    },
    {
      "type": "header",
      "content": "Controle da Parte Branca (Padding Interno)"
    },
    {
      "type": "range",
      "id": "card_padding_top",
      "min": 5,
      "max": 25,
      "step": 5,
      "default": 10,
      "unit": "px",
      "label": "Padding superior do card"
    },
    {
      "type": "range",
      "id": "card_padding_horizontal",
      "min": 5,
      "max": 25,
      "step": 5,
      "default": 10,
      "unit": "px",
      "label": "Padding lateral do card"
    },
    {
      "type": "range",
      "id": "card_padding_bottom",
      "min": 5,
      "max": 25,
      "step": 5,
      "default": 10,
      "unit": "px",
      "label": "Padding inferior do card"
    },
    {
      "type": "header",
      "content": "Espaçamento Interno dos Elementos (0-15px)"
    },
    {
      "type": "range",
      "id": "title_margin_bottom",
      "min": 0,
      "max": 15,
      "step": 5,
      "default": 0,
      "unit": "px",
      "label": "Espaçamento abaixo do título"
    },
    {
      "type": "range",
      "id": "original_price_margin_bottom",
      "min": 0,
      "max": 15,
      "step": 5,
      "default": 0,
      "unit": "px",
      "label": "Espaçamento abaixo do preço comparativo"
    },
    {
      "type": "range",
      "id": "current_price_margin_bottom",
      "min": 0,
      "max": 15,
      "step": 5,
      "default": 0,
      "unit": "px",
      "label": "Espaçamento abaixo do preço atual"
    },
    {
      "type": "range",
      "id": "installment_margin_bottom",
      "min": 0,
      "max": 15,
      "step": 5,
      "default": 0,
      "unit": "px",
      "label": "Espaçamento abaixo do parcelamento"
    },
    {
      "type": "header",
      "content": "Botão Ver Mais"
    },
    {
      "type": "checkbox",
      "id": "show_view_all_button",
      "default": true,
      "label": "Mostrar botão 'Ver Mais'"
    },
    {
      "type": "text",
      "id": "view_all_text",
      "label": "Texto do botão 'Ver Mais'",
      "default": "Ver Mais"
    },
    {
      "type": "color",
      "id": "button_color",
      "label": "Cor do botão 'Ver Mais'",
      "default": "#007bff"
    },
    {
      "type": "color",
      "id": "button_hover_color",
      "label": "Cor do botão 'Ver Mais' (hover)",
      "default": "#0056b3"
    },
    {
      "type": "header",
      "content": "Funcionalidades"
    },
    {
      "type": "checkbox",
      "id": "show_installments",
      "default": true,
      "label": "Mostrar parcelamento"
    },
    {
      "type": "select",
      "id": "installment_count",
      "label": "Número de parcelas",
      "options": [
        {"value": "6", "label": "6x"},
        {"value": "10", "label": "10x"},
        {"value": "12", "label": "12x"},
        {"value": "24", "label": "24x"}
      ],
      "default": "12"
    },
    {
      "type": "checkbox",
      "id": "show_sold_count",
      "default": true,
      "label": "Mostrar contador de vendas"
    }
  ],
  "presets": [
    {
      "name": "Coleções Independentes",
      "category": "Product"
    }
  ]
}
{% endschema %}

<style>
  .{{ namespace }}-products {
    padding: {{ section.settings.section_padding }}px 20px;
    max-width: 1200px;
    margin: 0 auto;
    font-family: inherit;
  }

  .{{ namespace }}-section-header {
    text-align: center;
    margin-bottom: 25px;
    border-bottom: 2px solid #eee;
    padding-bottom: 15px;
  }

  .{{ namespace }}-section-title {
    font-weight: bold;
    color: #333;
    position: relative;
    margin: 0 auto;
    padding-bottom: 10px;
    display: inline-block;
    font-size: {{ section.settings.desktop_section_title_font_size }}px;
  }

  .{{ namespace }}-section-title::after {
    content: '';
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    bottom: 0;
    width: 60px;
    height: 4px;
    background-color: #333;
  }

  /* Layout padrão - Grid */
  .{{ namespace }}-product-grid {
    display: grid;
    grid-template-columns: repeat({{ section.settings.desktop_products_per_row }}, 1fr);
    gap: {{ section.settings.products_gap }}px;
    margin-bottom: 30px;
  }

  /* Layout Slider - Desktop */
  .{{ namespace }}-product-grid.{{ namespace }}-slider-mode {
    display: flex;
    overflow-x: auto;
    scroll-behavior: smooth;
    scroll-snap-type: x mandatory;
    gap: {{ section.settings.products_gap }}px;
    padding-bottom: 10px;
    scrollbar-width: none;
    -ms-overflow-style: none;
  }

  .{{ namespace }}-product-grid.{{ namespace }}-slider-mode::-webkit-scrollbar {
    display: none;
  }

  .{{ namespace }}-product-grid.{{ namespace }}-slider-mode .{{ namespace }}-product-card {
    flex: 0 0 calc((100% - ({{ section.settings.products_gap }}px * ({{ section.settings.desktop_products_per_row }} - 1))) / {{ section.settings.desktop_products_per_row }});
    scroll-snap-align: start;
  }

  .{{ namespace }}-product-card {
    border: 2px solid #f0f0f0;
    border-radius: 8px;
    overflow: hidden;
    background-color: #fff;
    transition: all 0.3s ease;
    position: relative;
  }

  .{{ namespace }}-product-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.1);
    border-color: #ddd;
  }

  .{{ namespace }}-product-link {
    text-decoration: none;
    color: inherit;
    display: block;
  }

  .{{ namespace }}-product-image {
    position: relative;
    height: {{ section.settings.image_height }}px;
    overflow: hidden;
    background-color: #f8f8f8;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .{{ namespace }}-product-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
  }

  .{{ namespace }}-product-card:hover .{{ namespace }}-product-image img {
    transform: scale(1.05);
  }

  .{{ namespace }}-placeholder-svg {
    width: 60%;
    height: 60%;
    opacity: 0.3;
  }

  .{{ namespace }}-discount-badge {
    position: absolute;
    top: 15px;
    left: 15px;
    background-color: #000;
    color: #fff;
    padding: 6px 10px;
    font-size: 12px;
    font-weight: bold;
    border-radius: 4px;
    z-index: 2;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .{{ namespace }}-product-info {
    padding: {{ section.settings.card_padding_top }}px {{ section.settings.card_padding_horizontal }}px {{ section.settings.card_padding_bottom }}px;
  }

  .{{ namespace }}-product-title {
    font-weight: 600;
    margin: 0 0 {{ section.settings.title_margin_bottom }}px 0;
    color: #333;
    line-height: 1.3;
    min-height: 35px;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    font-size: {{ section.settings.desktop_product_title_font_size }}px;
  }

  .{{ namespace }}-original-price-container {
    margin-bottom: {{ section.settings.original_price_margin_bottom }}px;
  }

  .{{ namespace }}-original-price {
    text-decoration: line-through;
    color: #999;
    display: block;
    font-size: {{ section.settings.desktop_original_price_font_size }}px;
  }

  .{{ namespace }}-current-price-container {
    margin-bottom: {{ section.settings.current_price_margin_bottom }}px;
  }

  .{{ namespace }}-current-price {
    font-weight: bold;
    color: #28a745;
    display: block;
    font-size: {{ section.settings.desktop_current_price_font_size }}px;
  }

  .{{ namespace }}-installments {
    color: #666;
    margin-bottom: {{ section.settings.installment_margin_bottom }}px;
    display: flex;
    align-items: center;
    gap: 5px;
    font-size: {{ section.settings.desktop_installment_font_size }}px;
  }

  .{{ namespace }}-installments .icon-credit-card {
    width: 16px;
    height: 16px;
    fill: #666;
  }

  .{{ namespace }}-installments strong {
    color: #28a745;
  }

  .{{ namespace }}-sold-count {
    color: #666;
    font-style: italic;
    margin: 0;
    font-size: {{ section.settings.desktop_sold_count_font_size }}px;
  }

  .{{ namespace }}-empty-state {
    text-align: center;
    padding: 40px;
    color: #666;
    font-style: italic;
  }

  .{{ namespace }}-view-all-container {
    text-align: center;
    margin-top: 25px;
  }

  .{{ namespace }}-view-all-btn {
    display: inline-block;
    text-decoration: none;
    font-weight: bold;
    font-size: 14px;
    padding: 12px 24px;
    border-radius: 6px;
    transition: all 0.3s ease;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    border: none;
    cursor: pointer;
    background-color: {{ section.settings.button_color }};
    color: #fff;
  }

  .{{ namespace }}-view-all-btn:hover {
    text-decoration: none;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    background-color: {{ section.settings.button_hover_color }};
  }

  /* Navegação do Slider - Estilo Glassmorphism Refinado */
  .{{ namespace }}-slider-nav {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-top: 25px;
    position: relative;
    z-index: 10;
  }

  .{{ namespace }}-slider-prev,
  .{{ namespace }}-slider-next {
    background: rgba(255, 255, 255, 0.25);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.4);
    color: #333;
    border-radius: 50%;
    width: 52px;
    height: 52px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    position: relative;
    overflow: hidden;
  }

  .{{ namespace }}-slider-prev::before,
  .{{ namespace }}-slider-next::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(45deg, rgba(255,255,255,0.1) 0%, transparent 100%);
    opacity: 0;
    transition: opacity 0.3s ease;
    pointer-events: none;
  }

  .{{ namespace }}-slider-prev:hover,
  .{{ namespace }}-slider-next:hover {
    background: rgba(255, 255, 255, 0.35);
    transform: translateY(-3px);
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
    border-color: rgba(255, 255, 255, 0.6);
  }

  .{{ namespace }}-slider-prev:hover::before,
  .{{ namespace }}-slider-next:hover::before {
    opacity: 1;
  }

  .{{ namespace }}-slider-prev:active,
  .{{ namespace }}-slider-next:active {
    transform: translateY(-1px);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
  }

  .{{ namespace }}-slider-prev:disabled,
  .{{ namespace }}-slider-next:disabled {
    background: rgba(200, 200, 200, 0.3);
    color: #999;
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
    border-color: rgba(200, 200, 200, 0.4);
  }

  .{{ namespace }}-slider-prev:disabled::before,
  .{{ namespace }}-slider-next:disabled::before {
    display: none;
  }

  /* Ícones das setas mais elegantes */
  .{{ namespace }}-slider-prev svg,
  .{{ namespace }}-slider-next svg {
    width: 18px;
    height: 18px;
    transition: transform 0.3s ease;
  }

  .{{ namespace }}-slider-prev:hover svg {
    transform: translateX(-2px);
  }

  .{{ namespace }}-slider-next:hover svg {
    transform: translateX(2px);
  }

  /* Adaptação para diferentes backgrounds */
  @media (prefers-color-scheme: dark) {
    .{{ namespace }}-slider-prev,
    .{{ namespace }}-slider-next {
      background: rgba(0, 0, 0, 0.25);
      border-color: rgba(255, 255, 255, 0.2);
      color: #fff;
    }
    
    .{{ namespace }}-slider-prev:hover,
    .{{ namespace }}-slider-next:hover {
      background: rgba(0, 0, 0, 0.35);
      border-color: rgba(255, 255, 255, 0.4);
    }
  }

  @media (max-width: 1024px) and (min-width: 769px) {
    .{{ namespace }}-product-grid {
      grid-template-columns: repeat({{ section.settings.tablet_products_per_row }}, 1fr);
    }
    
    .{{ namespace }}-product-grid.{{ namespace }}-slider-mode .{{ namespace }}-product-card {
      flex: 0 0 calc((100% - ({{ section.settings.products_gap }}px * ({{ section.settings.tablet_products_per_row }} - 1))) / {{ section.settings.tablet_products_per_row }});
    }
  }

  @media (max-width: 768px) {
    .{{ namespace }}-products {
      padding: {{ section.settings.section_padding | times: 0.8 }}px 15px;
    }

    .{{ namespace }}-section-title {
      font-size: {{ section.settings.mobile_section_title_font_size }}px;
    }

    /* Mobile sempre usa slider */
    .{{ namespace }}-product-grid,
    .{{ namespace }}-product-grid.{{ namespace }}-slider-mode {
      display: flex;
      overflow-x: auto;
      gap: {{ section.settings.products_gap | times: 0.8 }}px;
      margin-bottom: 25px;
      scroll-snap-type: x mandatory;
      scrollbar-width: none;
      -ms-overflow-style: none;
      padding-bottom: 10px;
    }

    .{{ namespace }}-product-grid::-webkit-scrollbar {
      display: none;
    }

    .{{ namespace }}-product-card {
      flex: 0 0 calc(66.67% - {{ section.settings.products_gap | times: 0.8 | divided_by: 2 }}px);
      scroll-snap-align: start;
    }

    .{{ namespace }}-product-image {
      height: {{ section.settings.image_height | times: 0.8 }}px;
    }

    .{{ namespace }}-product-info {
      padding: {{ section.settings.card_padding_top | times: 0.8 }}px {{ section.settings.card_padding_horizontal | times: 0.8 }}px {{ section.settings.card_padding_bottom | times: 0.8 }}px;
    }

    .{{ namespace }}-product-title {
      min-height: 32px;
      margin-bottom: {{ section.settings.title_margin_bottom | times: 0.8 }}px;
      font-size: {{ section.settings.mobile_product_title_font_size }}px;
    }

    .{{ namespace }}-original-price-container {
      margin-bottom: {{ section.settings.original_price_margin_bottom | times: 0.8 }}px;
    }

    .{{ namespace }}-original-price {
      font-size: {{ section.settings.mobile_original_price_font_size }}px;
    }

    .{{ namespace }}-current-price-container {
      margin-bottom: {{ section.settings.current_price_margin_bottom | times: 0.8 }}px;
    }

    .{{ namespace }}-current-price {
      font-size: {{ section.settings.mobile_current_price_font_size }}px;
    }

    .{{ namespace }}-installments {
      margin-bottom: {{ section.settings.installment_margin_bottom | times: 0.8 }}px;
      font-size: {{ section.settings.mobile_installment_font_size }}px;
    }

    .{{ namespace }}-sold-count {
      font-size: {{ section.settings.mobile_sold_count_font_size }}px;
    }

    .{{ namespace }}-view-all-btn {
      font-size: 13px;
      padding: 10px 20px;
    }

    /* Esconder navegação do slider no mobile */
    .{{ namespace }}-slider-nav {
      display: none;
    }
  }

  /* Responsividade melhorada para touch devices */
  @media (hover: none) {
    .{{ namespace }}-slider-prev:hover,
    .{{ namespace }}-slider-next:hover {
      transform: none;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    }
  }

  @media (max-width: 480px) {
    .{{ namespace }}-product-image {
      height: {{ section.settings.image_height | times: 0.7 }}px;
    }
  }
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Inicializar slider apenas para desktop
  if (window.innerWidth > 768) {
    const sliderGrids = document.querySelectorAll('.{{ namespace }}-product-grid.{{ namespace }}-slider-mode');
    
    sliderGrids.forEach(function(grid) {
      const sectionId = grid.closest('[data-section-id]').getAttribute('data-section-id');
      const prevBtn = document.querySelector('.{{ namespace }}-slider-prev');
      const nextBtn = document.querySelector('.{{ namespace }}-slider-next');
      
      if (prevBtn && nextBtn) {
        const cardWidth = grid.querySelector('.{{ namespace }}-product-card').offsetWidth;
        const gap = {{ section.settings.products_gap }};
        const scrollAmount = cardWidth + gap;
        
        prevBtn.addEventListener('click', function() {
          grid.scrollBy({
            left: -scrollAmount,
            behavior: 'smooth'
          });
        });
        
        nextBtn.addEventListener('click', function() {
          grid.scrollBy({
            left: scrollAmount,
            behavior: 'smooth'
          });
        });
        
        // Atualizar estado dos botões
        function updateButtons() {
          const isAtStart = grid.scrollLeft === 0;
          const isAtEnd = grid.scrollLeft >= (grid.scrollWidth - grid.clientWidth);
          
          prevBtn.disabled = isAtStart;
          nextBtn.disabled = isAtEnd;
        }
        
        grid.addEventListener('scroll', updateButtons);
        updateButtons(); // Inicializar estado
      }
    });
  }
});
</script>
